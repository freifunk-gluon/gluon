From: Matthias Schiffer <mschiffer@universe-factory.net>
Date: Tue, 5 Apr 2016 20:30:56 +0200
Subject: xtables-addons: build: fix configure compatiblity with POSIX shells

diff --git a/package/network/utils/xtables-addons/patches/001-build-fix-configure-compatiblity-with-POSIX-shells.patch b/package/network/utils/xtables-addons/patches/001-build-fix-configure-compatiblity-with-POSIX-shells.patch
new file mode 100644
index 0000000..e0b11b5
--- /dev/null
+++ b/package/network/utils/xtables-addons/patches/001-build-fix-configure-compatiblity-with-POSIX-shells.patch
@@ -0,0 +1,51 @@
+From f07a0a5cb8b3c5e1aee8b30c7fa21ccfbf24a95a Mon Sep 17 00:00:00 2001
+Message-Id: <f07a0a5cb8b3c5e1aee8b30c7fa21ccfbf24a95a.1459880505.git.mschiffer@universe-factory.net>
+From: Matthias Schiffer <mschiffer@universe-factory.net>
+Date: Fri, 1 Apr 2016 22:24:00 +0200
+Subject: [PATCH] build: fix configure compatiblity with POSIX shells
+
+The kernel version detection code uses some bashisms, which makes the build
+fail on Debian systems where /bin/sh links to dash. Replace with POSIX-
+conforming commands at the cost of requiring awk.
+---
+ configure.ac | 24 +++++++++---------------
+ 1 file changed, 9 insertions(+), 15 deletions(-)
+
+diff --git a/configure.ac b/configure.ac
+index 82a1355..5a5ea57 100644
+--- a/configure.ac
++++ b/configure.ac
+@@ -44,21 +44,15 @@ regular_CFLAGS="-Wall -Waggregate-return -Wmissing-declarations \
+ 
+ if test -n "$kbuilddir"; then
+ 	AC_MSG_CHECKING([kernel version that we will build against])
+-	krel="$(make -sC "$kbuilddir" M=$PWD kernelrelease)";
+-	kmajor="${krel%%[[^0-9]]*}";
+-	kmajor="$(($kmajor+0))";
+-	krel="${krel:${#kmajor}}";
+-	krel="${krel#.}";
+-	kminor="${krel%%[[^0-9]]*}";
+-	kminor="$(($kminor+0))";
+-	krel="${krel:${#kminor}}";
+-	krel="${krel#.}";
+-	kmicro="${krel%%[[^0-9]]*}";
+-	kmicro="$(($kmicro+0))";
+-	krel="${krel:${#kmicro}}";
+-	krel="${krel#.}";
+-	kstable="${krel%%[[^0-9]]*}";
+-	kstable="$(($kstable+0))";
++	krel="$(make -sC "$kbuilddir" M=$PWD kernelrelease | $AWK -v 'FS=[[^0-9.]]' '{print $1; exit}')";
++	save_IFS=$IFS;
++	IFS='.';
++	set x $krel;
++	IFS=$save_IFS;
++	kmajor="$(($2+0))";
++	kminor="$(($3+0))";
++	kmicro="$(($4+0))";
++	kstable="$(($5+0))";
+ 	if test -z "$kmajor" -o -z "$kminor" -o -z "$kmicro"; then
+ 		echo "WARNING: Version detection did not succeed. Continue at own luck.";
+ 	else
+-- 
+2.8.0
+
diff --git a/package/network/utils/xtables-addons/patches/002-fix-kernel-version-detection.patch b/package/network/utils/xtables-addons/patches/002-fix-kernel-version-detection.patch
index d3b7caa..6a7a099 100644
--- a/package/network/utils/xtables-addons/patches/002-fix-kernel-version-detection.patch
+++ b/package/network/utils/xtables-addons/patches/002-fix-kernel-version-detection.patch
@@ -1,1954 +1,11 @@
---- a/configure
-+++ b/configure
-@@ -1,9 +1,11 @@
- #! /bin/sh
- # Guess values for system-dependent variables and create Makefiles.
--# Generated by GNU Autoconf 2.69 for xtables-addons 2.5.
-+# Generated by GNU Autoconf 2.68 for xtables-addons 2.5.
- #
- #
--# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.
-+# Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-+# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
-+# Foundation, Inc.
- #
- #
- # This configure script is free software; the Free Software Foundation
-@@ -132,31 +134,6 @@ export LANGUAGE
- # CDPATH.
- (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
- 
--# Use a proper internal environment variable to ensure we don't fall
--  # into an infinite loop, continuously re-executing ourselves.
--  if test x"${_as_can_reexec}" != xno && test "x$CONFIG_SHELL" != x; then
--    _as_can_reexec=no; export _as_can_reexec;
--    # We cannot yet assume a decent shell, so we have to provide a
--# neutralization value for shells without unset; and this also
--# works around shells that cannot unset nonexistent variables.
--# Preserve -v and -x to the replacement shell.
--BASH_ENV=/dev/null
--ENV=/dev/null
--(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
--case $- in # ((((
--  *v*x* | *x*v* ) as_opts=-vx ;;
--  *v* ) as_opts=-v ;;
--  *x* ) as_opts=-x ;;
--  * ) as_opts= ;;
--esac
--exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
--# Admittedly, this is quite paranoid, since all the known shells bail
--# out after a failed `exec'.
--$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
--as_fn_exit 255
--  fi
--  # We don't want this to propagate to other subprocesses.
--          { _as_can_reexec=; unset _as_can_reexec;}
- if test "x$CONFIG_SHELL" = x; then
-   as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
-   emulate sh
-@@ -190,8 +167,7 @@ if ( set x; as_fn_ret_success y && test 
- else
-   exitcode=1; echo positional parameters were not saved.
- fi
--test x\$exitcode = x0 || exit 1
--test -x / || exit 1"
-+test x\$exitcode = x0 || exit 1"
-   as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
-   as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
-   eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
-@@ -244,25 +220,21 @@ IFS=$as_save_IFS
- 
- 
-       if test "x$CONFIG_SHELL" != x; then :
--  export CONFIG_SHELL
--             # We cannot yet assume a decent shell, so we have to provide a
--# neutralization value for shells without unset; and this also
--# works around shells that cannot unset nonexistent variables.
--# Preserve -v and -x to the replacement shell.
--BASH_ENV=/dev/null
--ENV=/dev/null
--(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
--case $- in # ((((
--  *v*x* | *x*v* ) as_opts=-vx ;;
--  *v* ) as_opts=-v ;;
--  *x* ) as_opts=-x ;;
--  * ) as_opts= ;;
--esac
--exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
--# Admittedly, this is quite paranoid, since all the known shells bail
--# out after a failed `exec'.
--$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
--exit 255
-+  # We cannot yet assume a decent shell, so we have to provide a
-+	# neutralization value for shells without unset; and this also
-+	# works around shells that cannot unset nonexistent variables.
-+	# Preserve -v and -x to the replacement shell.
-+	BASH_ENV=/dev/null
-+	ENV=/dev/null
-+	(unset BASH_ENV) >/dev/null 2>&1 && unset BASH_ENV ENV
-+	export CONFIG_SHELL
-+	case $- in # ((((
-+	  *v*x* | *x*v* ) as_opts=-vx ;;
-+	  *v* ) as_opts=-v ;;
-+	  *x* ) as_opts=-x ;;
-+	  * ) as_opts= ;;
-+	esac
-+	exec "$CONFIG_SHELL" $as_opts "$as_myself" ${1+"$@"}
- fi
- 
-     if test x$as_have_required = xno; then :
-@@ -364,14 +336,6 @@ $as_echo X"$as_dir" |
- 
- 
- } # as_fn_mkdir_p
--
--# as_fn_executable_p FILE
--# -----------------------
--# Test if FILE is an executable regular file.
--as_fn_executable_p ()
--{
--  test -f "$1" && test -x "$1"
--} # as_fn_executable_p
- # as_fn_append VAR VALUE
- # ----------------------
- # Append the text in VALUE to the end of the definition contained in VAR. Take
-@@ -493,10 +457,6 @@ as_cr_alnum=$as_cr_Letters$as_cr_digits
-   chmod +x "$as_me.lineno" ||
-     { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
- 
--  # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
--  # already done that, so ensure we don't try to do so again and fall
--  # in an infinite loop.  This has already happened in practice.
--  _as_can_reexec=no; export _as_can_reexec
-   # Don't try to exec as it changes $[0], causing all sort of problems
-   # (the dirname of $[0] is not the place where we might find the
-   # original and so on.  Autoconf is especially sensitive to this).
-@@ -531,16 +491,16 @@ if (echo >conf$$.file) 2>/dev/null; then
-     # ... but there are two gotchas:
-     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
-     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
--    # In both cases, we have to default to `cp -pR'.
-+    # In both cases, we have to default to `cp -p'.
-     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
--      as_ln_s='cp -pR'
-+      as_ln_s='cp -p'
-   elif ln conf$$.file conf$$ 2>/dev/null; then
-     as_ln_s=ln
-   else
--    as_ln_s='cp -pR'
-+    as_ln_s='cp -p'
-   fi
- else
--  as_ln_s='cp -pR'
-+  as_ln_s='cp -p'
- fi
- rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
- rmdir conf$$.dir 2>/dev/null
-@@ -552,8 +512,28 @@ else
-   as_mkdir_p=false
- fi
- 
--as_test_x='test -x'
--as_executable_p=as_fn_executable_p
-+if test -x / >/dev/null 2>&1; then
-+  as_test_x='test -x'
-+else
-+  if ls -dL / >/dev/null 2>&1; then
-+    as_ls_L_option=L
-+  else
-+    as_ls_L_option=
-+  fi
-+  as_test_x='
-+    eval sh -c '\''
-+      if test -d "$1"; then
-+	test -d "$1/.";
-+      else
-+	case $1 in #(
-+	-*)set "./$1";;
-+	esac;
-+	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
-+	???[sx]*):;;*)false;;esac;fi
-+    '\'' sh
-+  '
-+fi
-+as_executable_p=$as_test_x
- 
- # Sed expression to map a string onto a valid CPP name.
- as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
-@@ -688,10 +668,6 @@ CPPFLAGS
- LDFLAGS
- CFLAGS
- CC
--AM_BACKSLASH
--AM_DEFAULT_VERBOSITY
--AM_DEFAULT_V
--AM_V
- am__untar
- am__tar
- AMTAR
-@@ -756,7 +732,6 @@ SHELL'
- ac_subst_files=''
- ac_user_opts='
- enable_option_checking
--enable_silent_rules
- enable_dependency_tracking
- enable_static
- enable_shared
-@@ -1237,6 +1212,8 @@ target=$target_alias
- if test "x$host_alias" != x; then
-   if test "x$build_alias" = x; then
-     cross_compiling=maybe
-+    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
-+    If a cross compiler is detected then cross compile mode will be used" >&2
-   elif test "x$build_alias" != "x$host_alias"; then
-     cross_compiling=yes
-   fi
-@@ -1400,12 +1377,8 @@ Optional Features:
-   --disable-option-checking  ignore unrecognized --enable/--with options
-   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
-   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
--  --enable-silent-rules   less verbose build output (undo: "make V=1")
--  --disable-silent-rules  verbose build output (undo: "make V=0")
--  --enable-dependency-tracking
--                          do not reject slow dependency extractors
--  --disable-dependency-tracking
--                          speeds up one-time build
-+  --disable-dependency-tracking  speeds up one-time build
-+  --enable-dependency-tracking   do not reject slow dependency extractors
-   --enable-static[=PKGS]  build static libraries [default=no]
-   --enable-shared[=PKGS]  build shared libraries [default=yes]
-   --enable-fast-install[=PKGS]
-@@ -1415,7 +1388,7 @@ Optional Features:
- Optional Packages:
-   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
-   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
--  --with-pic[=PKGS]       try to use only PIC/non-PIC objects [default=use
-+  --with-pic              try to use only PIC/non-PIC objects [default=use
-                           both]
-   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]
-   --with-sysroot=DIR Search for dependent libraries within DIR
-@@ -1512,9 +1485,9 @@ test -n "$ac_init_help" && exit $ac_stat
- if $ac_init_version; then
-   cat <<\_ACEOF
- xtables-addons configure 2.5
--generated by GNU Autoconf 2.69
-+generated by GNU Autoconf 2.68
- 
--Copyright (C) 2012 Free Software Foundation, Inc.
-+Copyright (C) 2010 Free Software Foundation, Inc.
- This configure script is free software; the Free Software Foundation
- gives unlimited permission to copy, distribute and modify it.
- _ACEOF
-@@ -1590,7 +1563,7 @@ $as_echo "$ac_try_echo"; } >&5
- 	 test ! -s conftest.err
-        } && test -s conftest$ac_exeext && {
- 	 test "$cross_compiling" = yes ||
--	 test -x conftest$ac_exeext
-+	 $as_test_x conftest$ac_exeext
-        }; then :
-   ac_retval=0
- else
-@@ -1877,7 +1850,7 @@ This file contains any messages produced
- running configure, to aid debugging if configure makes a mistake.
- 
- It was created by xtables-addons $as_me 2.5, which was
--generated by GNU Autoconf 2.69.  Invocation command line was
-+generated by GNU Autoconf 2.68.  Invocation command line was
- 
-   $ $0 $@
- 
-@@ -2293,7 +2266,7 @@ case $as_dir/ in #((
-     # by default.
-     for ac_prog in ginstall scoinst install; do
-       for ac_exec_ext in '' $ac_executable_extensions; do
--	if as_fn_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
-+	if { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; }; then
- 	  if test $ac_prog = install &&
- 	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
- 	    # AIX install.  It has an incompatible calling convention.
-@@ -2349,10 +2322,13 @@ test -z "$INSTALL_SCRIPT" && INSTALL_SCR
- 
- test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
- 
--am__api_version='1.14'
-+am__api_version='1.11'
- 
- { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether build environment is sane" >&5
- $as_echo_n "checking whether build environment is sane... " >&6; }
-+# Just in case
-+sleep 1
-+echo timestamp > conftest.file
- # Reject unsafe characters in $srcdir or the absolute working directory
- # name.  Accept space and tab only in the latter.
- am_lf='
-@@ -2363,40 +2339,32 @@ case `pwd` in
- esac
- case $srcdir in
-   *[\\\"\#\$\&\'\`$am_lf\ \	]*)
--    as_fn_error $? "unsafe srcdir value: '$srcdir'" "$LINENO" 5;;
-+    as_fn_error $? "unsafe srcdir value: \`$srcdir'" "$LINENO" 5;;
- esac
- 
--# Do 'set' in a subshell so we don't clobber the current shell's
-+# Do `set' in a subshell so we don't clobber the current shell's
- # arguments.  Must try -L first in case configure is actually a
- # symlink; some systems play weird games with the mod time of symlinks
- # (eg FreeBSD returns the mod time of the symlink's containing
- # directory).
- if (
--   am_has_slept=no
--   for am_try in 1 2; do
--     echo "timestamp, slept: $am_has_slept" > conftest.file
--     set X `ls -Lt "$srcdir/configure" conftest.file 2> /dev/null`
--     if test "$*" = "X"; then
--	# -L didn't work.
--	set X `ls -t "$srcdir/configure" conftest.file`
--     fi
--     if test "$*" != "X $srcdir/configure conftest.file" \
--	&& test "$*" != "X conftest.file $srcdir/configure"; then
-+   set X `ls -Lt "$srcdir/configure" conftest.file 2> /dev/null`
-+   if test "$*" = "X"; then
-+      # -L didn't work.
-+      set X `ls -t "$srcdir/configure" conftest.file`
-+   fi
-+   rm -f conftest.file
-+   if test "$*" != "X $srcdir/configure conftest.file" \
-+      && test "$*" != "X conftest.file $srcdir/configure"; then
-+
-+      # If neither matched, then we have a broken ls.  This can happen
-+      # if, for instance, CONFIG_SHELL is bash and it inherits a
-+      # broken ls alias from the environment.  This has actually
-+      # happened.  Such a system could not be considered "sane".
-+      as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
-+alias in your environment" "$LINENO" 5
-+   fi
- 
--	# If neither matched, then we have a broken ls.  This can happen
--	# if, for instance, CONFIG_SHELL is bash and it inherits a
--	# broken ls alias from the environment.  This has actually
--	# happened.  Such a system could not be considered "sane".
--	as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
--  alias in your environment" "$LINENO" 5
--     fi
--     if test "$2" = conftest.file || test $am_try -eq 2; then
--       break
--     fi
--     # Just in case.
--     sleep 1
--     am_has_slept=yes
--   done
-    test "$2" = conftest.file
-    )
- then
-@@ -2408,16 +2376,6 @@ Check your system clock" "$LINENO" 5
- fi
- { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
- $as_echo "yes" >&6; }
--# If we didn't sleep, we still need to ensure time stamps of config.status and
--# generated files are strictly newer.
--am_sleep_pid=
--if grep 'slept: no' conftest.file >/dev/null 2>&1; then
--  ( sleep 1 ) &
--  am_sleep_pid=$!
--fi
--
--rm -f conftest.file
--
- test "$program_prefix" != NONE &&
-   program_transform_name="s&^&$program_prefix&;$program_transform_name"
- # Use a double $ so make ignores it.
-@@ -2440,12 +2398,12 @@ if test x"${MISSING+set}" != xset; then
-   esac
- fi
- # Use eval to expand $SHELL
--if eval "$MISSING --is-lightweight"; then
--  am_missing_run="$MISSING "
-+if eval "$MISSING --run true"; then
-+  am_missing_run="$MISSING --run "
- else
-   am_missing_run=
--  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: 'missing' script is too old or missing" >&5
--$as_echo "$as_me: WARNING: 'missing' script is too old or missing" >&2;}
-+  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \`missing' script is too old or missing" >&5
-+$as_echo "$as_me: WARNING: \`missing' script is too old or missing" >&2;}
- fi
- 
- if test x"${install_sh}" != xset; then
-@@ -2457,10 +2415,10 @@ if test x"${install_sh}" != xset; then
-   esac
- fi
- 
--# Installed binaries are usually stripped using 'strip' when the user
--# run "make install-strip".  However 'strip' might not be the right
-+# Installed binaries are usually stripped using `strip' when the user
-+# run `make install-strip'.  However `strip' might not be the right
- # tool to use in cross-compilation environments, therefore Automake
--# will honor the 'STRIP' environment variable to overrule this program.
-+# will honor the `STRIP' environment variable to overrule this program.
- if test "$cross_compiling" != no; then
-   if test -n "$ac_tool_prefix"; then
-   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
-@@ -2479,7 +2437,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2519,7 +2477,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_STRIP="strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2570,7 +2528,7 @@ do
-   test -z "$as_dir" && as_dir=.
-     for ac_prog in mkdir gmkdir; do
- 	 for ac_exec_ext in '' $ac_executable_extensions; do
--	   as_fn_executable_p "$as_dir/$ac_prog$ac_exec_ext" || continue
-+	   { test -f "$as_dir/$ac_prog$ac_exec_ext" && $as_test_x "$as_dir/$ac_prog$ac_exec_ext"; } || continue
- 	   case `"$as_dir/$ac_prog$ac_exec_ext" --version 2>&1` in #(
- 	     'mkdir (GNU coreutils) '* | \
- 	     'mkdir (coreutils) '* | \
-@@ -2599,6 +2557,12 @@ fi
- { $as_echo "$as_me:${as_lineno-$LINENO}: result: $MKDIR_P" >&5
- $as_echo "$MKDIR_P" >&6; }
- 
-+mkdir_p="$MKDIR_P"
-+case $mkdir_p in
-+  [\\/$]* | ?:[\\/]*) ;;
-+  */*) mkdir_p="\$(top_builddir)/$mkdir_p" ;;
-+esac
-+
- for ac_prog in gawk mawk nawk awk
- do
-   # Extract the first word of "$ac_prog", so it can be a program name with args.
-@@ -2617,7 +2581,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_AWK="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2681,45 +2645,6 @@ else
- fi
- rmdir .tst 2>/dev/null
- 
--# Check whether --enable-silent-rules was given.
--if test "${enable_silent_rules+set}" = set; then :
--  enableval=$enable_silent_rules;
--fi
--
--case $enable_silent_rules in # (((
--  yes) AM_DEFAULT_VERBOSITY=0;;
--   no) AM_DEFAULT_VERBOSITY=1;;
--    *) AM_DEFAULT_VERBOSITY=1;;
--esac
--am_make=${MAKE-make}
--{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $am_make supports nested variables" >&5
--$as_echo_n "checking whether $am_make supports nested variables... " >&6; }
--if ${am_cv_make_support_nested_variables+:} false; then :
--  $as_echo_n "(cached) " >&6
--else
--  if $as_echo 'TRUE=$(BAR$(V))
--BAR0=false
--BAR1=true
--V=1
--am__doit:
--	@$(TRUE)
--.PHONY: am__doit' | $am_make -f - >/dev/null 2>&1; then
--  am_cv_make_support_nested_variables=yes
--else
--  am_cv_make_support_nested_variables=no
--fi
--fi
--{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_make_support_nested_variables" >&5
--$as_echo "$am_cv_make_support_nested_variables" >&6; }
--if test $am_cv_make_support_nested_variables = yes; then
--    AM_V='$(V)'
--  AM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'
--else
--  AM_V=$AM_DEFAULT_VERBOSITY
--  AM_DEFAULT_V=$AM_DEFAULT_VERBOSITY
--fi
--AM_BACKSLASH='\'
--
- if test "`cd $srcdir && pwd`" != "`pwd`"; then
-   # Use -I$(srcdir) only when $(srcdir) != ., so that make's output
-   # is not polluted with repeated "-I."
-@@ -2770,111 +2695,18 @@ AUTOHEADER=${AUTOHEADER-"${am_missing_ru
- 
- MAKEINFO=${MAKEINFO-"${am_missing_run}makeinfo"}
- 
--# For better backward compatibility.  To be removed once Automake 1.9.x
--# dies out for good.  For more background, see:
--# <http://lists.gnu.org/archive/html/automake/2012-07/msg00001.html>
--# <http://lists.gnu.org/archive/html/automake/2012-07/msg00014.html>
--mkdir_p='$(MKDIR_P)'
--
- # We need awk for the "check" target.  The system "awk" is bad on
- # some platforms.
- # Always define AMTAR for backward compatibility.  Yes, it's still used
- # in the wild :-(  We should find a proper way to deprecate it ...
- AMTAR='$${TAR-tar}'
- 
--
--# We'll loop over all known methods to create a tar archive until one works.
--_am_tools='gnutar  pax cpio none'
--
- am__tar='$${TAR-tar} chof - "$$tardir"' am__untar='$${TAR-tar} xf -'
- 
- 
- 
- 
- 
--
--# POSIX will say in a future version that running "rm -f" with no argument
--# is OK; and we want to be able to make that assumption in our Makefile
--# recipes.  So use an aggressive probe to check that the usage we want is
--# actually supported "in the wild" to an acceptable degree.
--# See automake bug#10828.
--# To make any issue more visible, cause the running configure to be aborted
--# by default if the 'rm' program in use doesn't match our expectations; the
--# user can still override this though.
--if rm -f && rm -fr && rm -rf; then : OK; else
--  cat >&2 <<'END'
--Oops!
--
--Your 'rm' program seems unable to run without file operands specified
--on the command line, even when the '-f' option is present.  This is contrary
--to the behaviour of most rm programs out there, and not conforming with
--the upcoming POSIX standard: <http://austingroupbugs.net/view.php?id=542>
--
--Please tell bug-automake@gnu.org about your system, including the value
--of your $PATH and any error possibly output before this message.  This
--can help us improve future automake versions.
--
--END
--  if test x"$ACCEPT_INFERIOR_RM_PROGRAM" = x"yes"; then
--    echo 'Configuration will proceed anyway, since you have set the' >&2
--    echo 'ACCEPT_INFERIOR_RM_PROGRAM variable to "yes"' >&2
--    echo >&2
--  else
--    cat >&2 <<'END'
--Aborting the configuration process, to ensure you take notice of the issue.
--
--You can download and install GNU coreutils to get an 'rm' implementation
--that behaves properly: <http://www.gnu.org/software/coreutils/>.
--
--If you want to complete the configuration process using your problematic
--'rm' anyway, export the environment variable ACCEPT_INFERIOR_RM_PROGRAM
--to "yes", and re-run configure.
--
--END
--    as_fn_error $? "Your 'rm' program is bad, sorry." "$LINENO" 5
--  fi
--fi
--
--# Check whether --enable-silent-rules was given.
--if test "${enable_silent_rules+set}" = set; then :
--  enableval=$enable_silent_rules;
--fi
--
--case $enable_silent_rules in # (((
--  yes) AM_DEFAULT_VERBOSITY=0;;
--   no) AM_DEFAULT_VERBOSITY=1;;
--    *) AM_DEFAULT_VERBOSITY=0;;
--esac
--am_make=${MAKE-make}
--{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $am_make supports nested variables" >&5
--$as_echo_n "checking whether $am_make supports nested variables... " >&6; }
--if ${am_cv_make_support_nested_variables+:} false; then :
--  $as_echo_n "(cached) " >&6
--else
--  if $as_echo 'TRUE=$(BAR$(V))
--BAR0=false
--BAR1=true
--V=1
--am__doit:
--	@$(TRUE)
--.PHONY: am__doit' | $am_make -f - >/dev/null 2>&1; then
--  am_cv_make_support_nested_variables=yes
--else
--  am_cv_make_support_nested_variables=no
--fi
--fi
--{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_make_support_nested_variables" >&5
--$as_echo "$am_cv_make_support_nested_variables" >&6; }
--if test $am_cv_make_support_nested_variables = yes; then
--    AM_V='$(V)'
--  AM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'
--else
--  AM_V=$AM_DEFAULT_VERBOSITY
--  AM_DEFAULT_V=$AM_DEFAULT_VERBOSITY
--fi
--AM_BACKSLASH='\'
--
--
- ac_ext=c
- ac_cpp='$CPP $CPPFLAGS'
- ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-@@ -2897,7 +2729,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_CC="${ac_tool_prefix}gcc"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2937,7 +2769,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_CC="gcc"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -2990,7 +2822,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_CC="${ac_tool_prefix}cc"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3031,7 +2863,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
-        ac_prog_rejected=yes
-        continue
-@@ -3089,7 +2921,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3133,7 +2965,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_CC="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3579,7 +3411,8 @@ cat confdefs.h - <<_ACEOF >conftest.$ac_
- /* end confdefs.h.  */
- #include <stdarg.h>
- #include <stdio.h>
--struct stat;
-+#include <sys/types.h>
-+#include <sys/stat.h>
- /* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
- struct buf { int x; };
- FILE * (*rcsopen) (struct buf *, struct stat *, int);
-@@ -3663,65 +3496,6 @@ ac_cpp='$CPP $CPPFLAGS'
- ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
- ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
- ac_compiler_gnu=$ac_cv_c_compiler_gnu
--
--ac_ext=c
--ac_cpp='$CPP $CPPFLAGS'
--ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
--ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
--ac_compiler_gnu=$ac_cv_c_compiler_gnu
--{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC understands -c and -o together" >&5
--$as_echo_n "checking whether $CC understands -c and -o together... " >&6; }
--if ${am_cv_prog_cc_c_o+:} false; then :
--  $as_echo_n "(cached) " >&6
--else
--  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
--/* end confdefs.h.  */
--
--int
--main ()
--{
--
--  ;
--  return 0;
--}
--_ACEOF
--  # Make sure it works both with $CC and with simple cc.
--  # Following AC_PROG_CC_C_O, we do the test twice because some
--  # compilers refuse to overwrite an existing .o file with -o,
--  # though they will create one.
--  am_cv_prog_cc_c_o=yes
--  for am_i in 1 2; do
--    if { echo "$as_me:$LINENO: $CC -c conftest.$ac_ext -o conftest2.$ac_objext" >&5
--   ($CC -c conftest.$ac_ext -o conftest2.$ac_objext) >&5 2>&5
--   ac_status=$?
--   echo "$as_me:$LINENO: \$? = $ac_status" >&5
--   (exit $ac_status); } \
--         && test -f conftest2.$ac_objext; then
--      : OK
--    else
--      am_cv_prog_cc_c_o=no
--      break
--    fi
--  done
--  rm -f core conftest*
--  unset am_i
--fi
--{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_prog_cc_c_o" >&5
--$as_echo "$am_cv_prog_cc_c_o" >&6; }
--if test "$am_cv_prog_cc_c_o" != yes; then
--   # Losing compiler, so override with the script.
--   # FIXME: It is wrong to rewrite CC.
--   # But if we don't then we get into trouble of one sort or another.
--   # A longer-term fix would be to have automake use am__CC in this case,
--   # and then we could set am__CC="\$(top_srcdir)/compile \$(CC)"
--   CC="$am_aux_dir/compile $CC"
--fi
--ac_ext=c
--ac_cpp='$CPP $CPPFLAGS'
--ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
--ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
--ac_compiler_gnu=$ac_cv_c_compiler_gnu
--
- DEPDIR="${am__leading_dot}deps"
- 
- ac_config_commands="$ac_config_commands depfiles"
-@@ -3741,7 +3515,7 @@ am__quote=
- _am_result=none
- # First try GNU make style include.
- echo "include confinc" > confmf
--# Ignore all kinds of additional output from 'make'.
-+# Ignore all kinds of additional output from `make'.
- case `$am_make -s -f confmf 2> /dev/null` in #(
- *the\ am__doit\ target*)
-   am__include=include
-@@ -3797,8 +3571,8 @@ else
-   # We make a subdir and do the tests there.  Otherwise we can end up
-   # making bogus files that we don't know about and never remove.  For
-   # instance it was reported that on HP-UX the gcc test will end up
--  # making a dummy file named 'D' -- because '-MD' means "put the output
--  # in D".
-+  # making a dummy file named `D' -- because `-MD' means `put the output
-+  # in D'.
-   rm -rf conftest.dir
-   mkdir conftest.dir
-   # Copy depcomp to subdir because otherwise we won't find it if we're
-@@ -3833,16 +3607,16 @@ else
-     : > sub/conftest.c
-     for i in 1 2 3 4 5 6; do
-       echo '#include "conftst'$i'.h"' >> sub/conftest.c
--      # Using ": > sub/conftst$i.h" creates only sub/conftst1.h with
--      # Solaris 10 /bin/sh.
--      echo '/* dummy */' > sub/conftst$i.h
-+      # Using `: > sub/conftst$i.h' creates only sub/conftst1.h with
-+      # Solaris 8's {/usr,}/bin/sh.
-+      touch sub/conftst$i.h
-     done
-     echo "${am__include} ${am__quote}sub/conftest.Po${am__quote}" > confmf
- 
--    # We check with '-c' and '-o' for the sake of the "dashmstdout"
-+    # We check with `-c' and `-o' for the sake of the "dashmstdout"
-     # mode.  It turns out that the SunPro C++ compiler does not properly
--    # handle '-M -o', and we need to detect this.  Also, some Intel
--    # versions had trouble with output in subdirs.
-+    # handle `-M -o', and we need to detect this.  Also, some Intel
-+    # versions had trouble with output in subdirs
-     am__obj=sub/conftest.${OBJEXT-o}
-     am__minus_obj="-o $am__obj"
-     case $depmode in
-@@ -3851,8 +3625,8 @@ else
-       test "$am__universal" = false || continue
-       ;;
-     nosideeffect)
--      # After this tag, mechanisms are not by side-effect, so they'll
--      # only be used when explicitly requested.
-+      # after this tag, mechanisms are not by side-effect, so they'll
-+      # only be used when explicitly requested
-       if test "x$enable_dependency_tracking" = xyes; then
- 	continue
-       else
-@@ -3860,7 +3634,7 @@ else
-       fi
-       ;;
-     msvc7 | msvc7msys | msvisualcpp | msvcmsys)
--      # This compiler won't grok '-c -o', but also, the minuso test has
-+      # This compiler won't grok `-c -o', but also, the minuso test has
-       # not run yet.  These depmodes are late enough in the game, and
-       # so weak that their functioning should not be impacted.
-       am__obj=conftest.${OBJEXT-o}
-@@ -3914,6 +3688,131 @@ else
- fi
- 
- 
-+if test "x$CC" != xcc; then
-+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC and cc understand -c and -o together" >&5
-+$as_echo_n "checking whether $CC and cc understand -c and -o together... " >&6; }
-+else
-+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cc understands -c and -o together" >&5
-+$as_echo_n "checking whether cc understands -c and -o together... " >&6; }
-+fi
-+set dummy $CC; ac_cc=`$as_echo "$2" |
-+		      sed 's/[^a-zA-Z0-9_]/_/g;s/^[0-9]/_/'`
-+if eval \${ac_cv_prog_cc_${ac_cc}_c_o+:} false; then :
-+  $as_echo_n "(cached) " >&6
-+else
-+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-+/* end confdefs.h.  */
-+
-+int
-+main ()
-+{
-+
-+  ;
-+  return 0;
-+}
-+_ACEOF
-+# Make sure it works both with $CC and with simple cc.
-+# We do the test twice because some compilers refuse to overwrite an
-+# existing .o file with -o, though they will create one.
-+ac_try='$CC -c conftest.$ac_ext -o conftest2.$ac_objext >&5'
-+rm -f conftest2.*
-+if { { case "(($ac_try" in
-+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-+  *) ac_try_echo=$ac_try;;
-+esac
-+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-+$as_echo "$ac_try_echo"; } >&5
-+  (eval "$ac_try") 2>&5
-+  ac_status=$?
-+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-+  test $ac_status = 0; } &&
-+   test -f conftest2.$ac_objext && { { case "(($ac_try" in
-+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-+  *) ac_try_echo=$ac_try;;
-+esac
-+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-+$as_echo "$ac_try_echo"; } >&5
-+  (eval "$ac_try") 2>&5
-+  ac_status=$?
-+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-+  test $ac_status = 0; };
-+then
-+  eval ac_cv_prog_cc_${ac_cc}_c_o=yes
-+  if test "x$CC" != xcc; then
-+    # Test first that cc exists at all.
-+    if { ac_try='cc -c conftest.$ac_ext >&5'
-+  { { case "(($ac_try" in
-+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-+  *) ac_try_echo=$ac_try;;
-+esac
-+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-+$as_echo "$ac_try_echo"; } >&5
-+  (eval "$ac_try") 2>&5
-+  ac_status=$?
-+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-+  test $ac_status = 0; }; }; then
-+      ac_try='cc -c conftest.$ac_ext -o conftest2.$ac_objext >&5'
-+      rm -f conftest2.*
-+      if { { case "(($ac_try" in
-+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-+  *) ac_try_echo=$ac_try;;
-+esac
-+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-+$as_echo "$ac_try_echo"; } >&5
-+  (eval "$ac_try") 2>&5
-+  ac_status=$?
-+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-+  test $ac_status = 0; } &&
-+	 test -f conftest2.$ac_objext && { { case "(($ac_try" in
-+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-+  *) ac_try_echo=$ac_try;;
-+esac
-+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-+$as_echo "$ac_try_echo"; } >&5
-+  (eval "$ac_try") 2>&5
-+  ac_status=$?
-+  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-+  test $ac_status = 0; };
-+      then
-+	# cc works too.
-+	:
-+      else
-+	# cc exists but doesn't like -o.
-+	eval ac_cv_prog_cc_${ac_cc}_c_o=no
-+      fi
-+    fi
-+  fi
-+else
-+  eval ac_cv_prog_cc_${ac_cc}_c_o=no
-+fi
-+rm -f core conftest*
-+
-+fi
-+if eval test \$ac_cv_prog_cc_${ac_cc}_c_o = yes; then
-+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-+$as_echo "yes" >&6; }
-+else
-+  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-+$as_echo "no" >&6; }
-+
-+$as_echo "#define NO_MINUS_C_MINUS_O 1" >>confdefs.h
-+
-+fi
-+
-+# FIXME: we rely on the cache variable name because
-+# there is no other way.
-+set dummy $CC
-+am_cc=`echo $2 | sed 's/[^a-zA-Z0-9_]/_/g;s/^[0-9]/_/'`
-+eval am_t=\$ac_cv_prog_cc_${am_cc}_c_o
-+if test "$am_t" != yes; then
-+   # Losing compiler, so override with the script.
-+   # FIXME: It is wrong to rewrite CC.
-+   # But if we don't then we get into trouble of one sort or another.
-+   # A longer-term fix would be to have automake use am__CC in this case,
-+   # and then we could set am__CC="\$(top_srcdir)/compile \$(CC)"
-+   CC="$am_aux_dir/compile $CC"
-+fi
-+
- 
- 
- if test -n "$ac_tool_prefix"; then
-@@ -3935,7 +3834,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_AR="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -3979,7 +3878,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_AR="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -4023,13 +3922,7 @@ $as_echo_n "checking the archiver ($AR) 
- if ${am_cv_ar_interface+:} false; then :
-   $as_echo_n "(cached) " >&6
- else
--  ac_ext=c
--ac_cpp='$CPP $CPPFLAGS'
--ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
--ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
--ac_compiler_gnu=$ac_cv_c_compiler_gnu
--
--   am_cv_ar_interface=ar
-+  am_cv_ar_interface=ar
-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext
- /* end confdefs.h.  */
- int some_variable = 0;
-@@ -4060,11 +3953,6 @@ if ac_fn_c_try_compile "$LINENO"; then :
- 
- fi
- rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
--   ac_ext=c
--ac_cpp='$CPP $CPPFLAGS'
--ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
--ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
--ac_compiler_gnu=$ac_cv_c_compiler_gnu
- 
- fi
- { $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_ar_interface" >&5
-@@ -4126,8 +4014,8 @@ esac
- 
- 
- 
--macro_version='2.4.2'
--macro_revision='1.3337'
-+macro_version='2.4'
-+macro_revision='1.3293'
- 
- 
- 
-@@ -4305,7 +4193,7 @@ do
-     for ac_prog in sed gsed; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_SED="$as_dir/$ac_prog$ac_exec_ext"
--      as_fn_executable_p "$ac_path_SED" || continue
-+      { test -f "$ac_path_SED" && $as_test_x "$ac_path_SED"; } || continue
- # Check for GNU ac_path_SED and select it if it is found.
-   # Check for GNU $ac_path_SED
- case `"$ac_path_SED" --version 2>&1` in
-@@ -4381,7 +4269,7 @@ do
-     for ac_prog in grep ggrep; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
--      as_fn_executable_p "$ac_path_GREP" || continue
-+      { test -f "$ac_path_GREP" && $as_test_x "$ac_path_GREP"; } || continue
- # Check for GNU ac_path_GREP and select it if it is found.
-   # Check for GNU $ac_path_GREP
- case `"$ac_path_GREP" --version 2>&1` in
-@@ -4447,7 +4335,7 @@ do
-     for ac_prog in egrep; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
--      as_fn_executable_p "$ac_path_EGREP" || continue
-+      { test -f "$ac_path_EGREP" && $as_test_x "$ac_path_EGREP"; } || continue
- # Check for GNU ac_path_EGREP and select it if it is found.
-   # Check for GNU $ac_path_EGREP
- case `"$ac_path_EGREP" --version 2>&1` in
-@@ -4514,7 +4402,7 @@ do
-     for ac_prog in fgrep; do
-     for ac_exec_ext in '' $ac_executable_extensions; do
-       ac_path_FGREP="$as_dir/$ac_prog$ac_exec_ext"
--      as_fn_executable_p "$ac_path_FGREP" || continue
-+      { test -f "$ac_path_FGREP" && $as_test_x "$ac_path_FGREP"; } || continue
- # Check for GNU ac_path_FGREP and select it if it is found.
-   # Check for GNU $ac_path_FGREP
- case `"$ac_path_FGREP" --version 2>&1` in
-@@ -4770,7 +4658,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_DUMPBIN="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -4814,7 +4702,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_DUMPBIN="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -4972,11 +4860,6 @@ else
-     lt_cv_sys_max_cmd_len=196608
-     ;;
- 
--  os2*)
--    # The test takes a long time on OS/2.
--    lt_cv_sys_max_cmd_len=8192
--    ;;
--
-   osf*)
-     # Dr. Hans Ekkehard Plesser reports seeing a kernel panic running configure
-     # due to this test when exec_disable_arg_limit is 1 on Tru64. It is not
-@@ -5016,7 +4899,7 @@ else
-       # If test is not a shell built-in, we'll probably end up computing a
-       # maximum length that is only half of the actual maximum length, but
-       # we can't tell.
--      while { test "X"`env echo "$teststring$teststring" 2>/dev/null` \
-+      while { test "X"`func_fallback_echo "$teststring$teststring" 2>/dev/null` \
- 	         = "X$teststring$teststring"; } >/dev/null 2>&1 &&
- 	      test $i != 17 # 1/2 MB should be enough
-       do
-@@ -5238,7 +5121,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_OBJDUMP="${ac_tool_prefix}objdump"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5278,7 +5161,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_OBJDUMP="objdump"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5445,7 +5328,7 @@ irix5* | irix6* | nonstopux*)
-   lt_cv_deplibs_check_method=pass_all
-   ;;
- 
--# This must be glibc/ELF.
-+# This must be Linux ELF.
- linux* | k*bsd*-gnu | kopensolaris*-gnu)
-   lt_cv_deplibs_check_method=pass_all
-   ;;
-@@ -5584,7 +5467,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_DLLTOOL="${ac_tool_prefix}dlltool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5624,7 +5507,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_DLLTOOL="dlltool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5727,7 +5610,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_AR="$ac_tool_prefix$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5771,7 +5654,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_AR="$ac_prog"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5896,7 +5779,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_STRIP="${ac_tool_prefix}strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5936,7 +5819,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_STRIP="strip"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -5995,7 +5878,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6035,7 +5918,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_RANLIB="ranlib"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6085,13 +5968,13 @@ old_postuninstall_cmds=
- if test -n "$RANLIB"; then
-   case $host_os in
-   openbsd*)
--    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$tool_oldlib"
-+    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB -t \$oldlib"
-     ;;
-   *)
--    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$tool_oldlib"
-+    old_postinstall_cmds="$old_postinstall_cmds~\$RANLIB \$oldlib"
-     ;;
-   esac
--  old_archive_cmds="$old_archive_cmds~\$RANLIB \$tool_oldlib"
-+  old_archive_cmds="$old_archive_cmds~\$RANLIB \$oldlib"
- fi
- 
- case $host_os in
-@@ -6238,7 +6121,6 @@ for ac_symprfx in "" "_"; do
-     # which start with @ or ?.
-     lt_cv_sys_global_symbol_pipe="$AWK '"\
- "     {last_section=section; section=\$ 3};"\
--"     /^COFF SYMBOL TABLE/{for(i in hide) delete hide[i]};"\
- "     /Section length .*#relocs.*(pick any)/{hide[last_section]=1};"\
- "     \$ 0!~/External *\|/{next};"\
- "     / 0+ UNDEF /{next}; / UNDEF \([^|]\)*()/{next};"\
-@@ -6627,7 +6509,7 @@ $as_echo "$lt_cv_cc_needs_belf" >&6; }
-     CFLAGS="$SAVE_CFLAGS"
-   fi
-   ;;
--*-*solaris*)
-+sparc*-*solaris*)
-   # Find out which ABI we are using.
-   echo 'int i;' > conftest.$ac_ext
-   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
-@@ -6638,20 +6520,7 @@ $as_echo "$lt_cv_cc_needs_belf" >&6; }
-     case `/usr/bin/file conftest.o` in
-     *64-bit*)
-       case $lt_cv_prog_gnu_ld in
--      yes*)
--        case $host in
--        i?86-*-solaris*)
--          LD="${LD-ld} -m elf_x86_64"
--          ;;
--        sparc*-*-solaris*)
--          LD="${LD-ld} -m elf64_sparc"
--          ;;
--        esac
--        # GNU ld 2.21 introduced _sol2 emulations.  Use them if available.
--        if ${LD-ld} -V | grep _sol2 >/dev/null 2>&1; then
--          LD="${LD-ld}_sol2"
--        fi
--        ;;
-+      yes*) LD="${LD-ld} -m elf64_sparc" ;;
-       *)
- 	if ${LD-ld} -64 -r -o conftest2.o conftest.o >/dev/null 2>&1; then
- 	  LD="${LD-ld} -64"
-@@ -6684,7 +6553,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_MANIFEST_TOOL="${ac_tool_prefix}mt"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6724,7 +6593,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_MANIFEST_TOOL="mt"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6804,7 +6673,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_DSYMUTIL="${ac_tool_prefix}dsymutil"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6844,7 +6713,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_DSYMUTIL="dsymutil"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6896,7 +6765,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_NMEDIT="${ac_tool_prefix}nmedit"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6936,7 +6805,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_NMEDIT="nmedit"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -6988,7 +6857,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_LIPO="${ac_tool_prefix}lipo"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7028,7 +6897,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_LIPO="lipo"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7080,7 +6949,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_OTOOL="${ac_tool_prefix}otool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7120,7 +6989,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_OTOOL="otool"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7172,7 +7041,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_OTOOL64="${ac_tool_prefix}otool64"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7212,7 +7081,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_prog_ac_ct_OTOOL64="otool64"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -7291,13 +7160,7 @@ else
- 	$LTCC $LTCFLAGS $LDFLAGS -o libconftest.dylib \
- 	  -dynamiclib -Wl,-single_module conftest.c 2>conftest.err
-         _lt_result=$?
--	# If there is a non-empty error log, and "single_module"
--	# appears in it, assume the flag caused a linker warning
--        if test -s conftest.err && $GREP single_module conftest.err; then
--	  cat conftest.err >&5
--	# Otherwise, if the output was created with a 0 exit code from
--	# the compiler, it worked.
--	elif test -f libconftest.dylib && test $_lt_result -eq 0; then
-+	if test -f libconftest.dylib && test ! -s conftest.err && test $_lt_result = 0; then
- 	  lt_cv_apple_cc_single_mod=yes
- 	else
- 	  cat conftest.err >&5
-@@ -7308,7 +7171,6 @@ else
- fi
- { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_apple_cc_single_mod" >&5
- $as_echo "$lt_cv_apple_cc_single_mod" >&6; }
--
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -exported_symbols_list linker flag" >&5
- $as_echo_n "checking for -exported_symbols_list linker flag... " >&6; }
- if ${lt_cv_ld_exported_symbols_list+:} false; then :
-@@ -7341,7 +7203,6 @@ rm -f core conftest.err conftest.$ac_obj
- fi
- { $as_echo "$as_me:${as_lineno-$LINENO}: result: $lt_cv_ld_exported_symbols_list" >&5
- $as_echo "$lt_cv_ld_exported_symbols_list" >&6; }
--
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for -force_load linker flag" >&5
- $as_echo_n "checking for -force_load linker flag... " >&6; }
- if ${lt_cv_ld_force_load+:} false; then :
-@@ -7363,9 +7224,7 @@ _LT_EOF
-       echo "$LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a" >&5
-       $LTCC $LTCFLAGS $LDFLAGS -o conftest conftest.c -Wl,-force_load,./libconftest.a 2>conftest.err
-       _lt_result=$?
--      if test -s conftest.err && $GREP force_load conftest.err; then
--	cat conftest.err >&5
--      elif test -f conftest && test $_lt_result -eq 0 && $GREP forced_load conftest >/dev/null 2>&1 ; then
-+      if test -f conftest && test ! -s conftest.err && test $_lt_result = 0 && $GREP forced_load conftest 2>&1 >/dev/null; then
- 	lt_cv_ld_force_load=yes
-       else
- 	cat conftest.err >&5
-@@ -7740,22 +7599,7 @@ fi
- 
- # Check whether --with-pic was given.
- if test "${with_pic+set}" = set; then :
--  withval=$with_pic; lt_p=${PACKAGE-default}
--    case $withval in
--    yes|no) pic_mode=$withval ;;
--    *)
--      pic_mode=default
--      # Look at the argument we got.  We use all the common list separators.
--      lt_save_ifs="$IFS"; IFS="${IFS}$PATH_SEPARATOR,"
--      for lt_pkg in $withval; do
--	IFS="$lt_save_ifs"
--	if test "X$lt_pkg" = "X$lt_p"; then
--	  pic_mode=yes
--	fi
--      done
--      IFS="$lt_save_ifs"
--      ;;
--    esac
-+  withval=$with_pic; pic_mode="$withval"
- else
-   pic_mode=default
- fi
-@@ -7833,10 +7677,6 @@ LIBTOOL='$(SHELL) $(top_builddir)/libtoo
- 
- 
- 
--
--
--
--
- test -z "$LN_S" && LN_S="ln -s"
- 
- 
-@@ -8126,10 +7966,6 @@ _lt_linker_boilerplate=`cat conftest.err
- $RM -r conftest*
- 
- 
--## CAVEAT EMPTOR:
--## There is no encapsulation within the following macros, do not change
--## the running order or otherwise move them around unless you know exactly
--## what you are doing...
- if test -n "$compiler"; then
- 
- lt_prog_compiler_no_builtin_flag=
-@@ -8296,9 +8132,7 @@ lt_prog_compiler_static=
-     case $cc_basename in
-     nvcc*) # Cuda Compiler Driver 2.2
-       lt_prog_compiler_wl='-Xlinker '
--      if test -n "$lt_prog_compiler_pic"; then
--        lt_prog_compiler_pic="-Xcompiler $lt_prog_compiler_pic"
--      fi
-+      lt_prog_compiler_pic='-Xcompiler -fPIC'
-       ;;
-     esac
-   else
-@@ -8389,33 +8223,18 @@ lt_prog_compiler_static=
- 	;;
-       *)
- 	case `$CC -V 2>&1 | sed 5q` in
--	*Sun\ Ceres\ Fortran* | *Sun*Fortran*\ [1-7].* | *Sun*Fortran*\ 8.[0-3]*)
-+	*Sun\ F* | *Sun*Fortran*)
- 	  # Sun Fortran 8.3 passes all unrecognized flags to the linker
- 	  lt_prog_compiler_pic='-KPIC'
- 	  lt_prog_compiler_static='-Bstatic'
- 	  lt_prog_compiler_wl=''
- 	  ;;
--	*Sun\ F* | *Sun*Fortran*)
--	  lt_prog_compiler_pic='-KPIC'
--	  lt_prog_compiler_static='-Bstatic'
--	  lt_prog_compiler_wl='-Qoption ld '
--	  ;;
- 	*Sun\ C*)
- 	  # Sun C 5.9
- 	  lt_prog_compiler_pic='-KPIC'
- 	  lt_prog_compiler_static='-Bstatic'
- 	  lt_prog_compiler_wl='-Wl,'
- 	  ;;
--        *Intel*\ [CF]*Compiler*)
--	  lt_prog_compiler_wl='-Wl,'
--	  lt_prog_compiler_pic='-fPIC'
--	  lt_prog_compiler_static='-static'
--	  ;;
--	*Portland\ Group*)
--	  lt_prog_compiler_wl='-Wl,'
--	  lt_prog_compiler_pic='-fpic'
--	  lt_prog_compiler_static='-Bstatic'
--	  ;;
- 	esac
- 	;;
-       esac
-@@ -8777,6 +8596,7 @@ $as_echo_n "checking whether the $compil
-   hardcode_direct=no
-   hardcode_direct_absolute=no
-   hardcode_libdir_flag_spec=
-+  hardcode_libdir_flag_spec_ld=
-   hardcode_libdir_separator=
-   hardcode_minus_L=no
-   hardcode_shlibpath_var=unsupported
-@@ -9026,7 +8846,8 @@ _LT_EOF
- 	xlf* | bgf* | bgxlf* | mpixlf*)
- 	  # IBM XL Fortran 10.1 on PPC cannot create shared libs itself
- 	  whole_archive_flag_spec='--whole-archive$convenience --no-whole-archive'
--	  hardcode_libdir_flag_spec='${wl}-rpath ${wl}$libdir'
-+	  hardcode_libdir_flag_spec=
-+	  hardcode_libdir_flag_spec_ld='-rpath $libdir'
- 	  archive_cmds='$LD -shared $libobjs $deplibs $linker_flags -soname $soname -o $lib'
- 	  if test "x$supports_anon_versioning" = xyes; then
- 	    archive_expsym_cmds='echo "{ global:" > $output_objdir/$libname.ver~
-@@ -9405,7 +9226,6 @@ fi
- 	# The linker will not automatically build a static lib if we build a DLL.
- 	# _LT_TAGVAR(old_archive_from_new_cmds, )='true'
- 	enable_shared_with_static_runtimes=yes
--	exclude_expsyms='_NULL_IMPORT_DESCRIPTOR|_IMPORT_DESCRIPTOR_.*'
- 	export_symbols_cmds='$NM $libobjs $convenience | $global_symbol_pipe | $SED -e '\''/^[BCDGRS][ ]/s/.*[ ]\([^ ]*\)/\1,DATA/'\'' | $SED -e '\''/^[AITW][ ]/s/.*[ ]//'\'' | sort | uniq > $export_symbols'
- 	# Don't use ranlib
- 	old_postinstall_cmds='chmod 644 $oldlib'
-@@ -9451,7 +9271,6 @@ fi
-   hardcode_shlibpath_var=unsupported
-   if test "$lt_cv_ld_force_load" = "yes"; then
-     whole_archive_flag_spec='`for conv in $convenience\"\"; do test  -n \"$conv\" && new_convenience=\"$new_convenience ${wl}-force_load,$conv\"; done; func_echo_all \"$new_convenience\"`'
--
-   else
-     whole_archive_flag_spec=''
-   fi
-@@ -9480,6 +9299,10 @@ fi
-       hardcode_shlibpath_var=no
-       ;;
- 
-+    freebsd1*)
-+      ld_shlibs=no
-+      ;;
-+
-     # FreeBSD 2.2.[012] allows us to include c++rt0.o to get C++ constructor
-     # support.  Future versions do this automatically, but an explicit c++rt0.o
-     # does not break anything, and helps significantly (at the cost of a little
-@@ -9492,7 +9315,7 @@ fi
-       ;;
- 
-     # Unfortunately, older versions of FreeBSD 2 do not have this feature.
--    freebsd2.*)
-+    freebsd2*)
-       archive_cmds='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
-       hardcode_direct=yes
-       hardcode_minus_L=yes
-@@ -9531,6 +9354,7 @@ fi
-       fi
-       if test "$with_gnu_ld" = no; then
- 	hardcode_libdir_flag_spec='${wl}+b ${wl}$libdir'
-+	hardcode_libdir_flag_spec_ld='+b $libdir'
- 	hardcode_libdir_separator=:
- 	hardcode_direct=yes
- 	hardcode_direct_absolute=yes
-@@ -10154,6 +9978,11 @@ esac
- 
- 
- 
-+
-+
-+
-+
-+
-   { $as_echo "$as_me:${as_lineno-$LINENO}: checking dynamic linker characteristics" >&5
- $as_echo_n "checking dynamic linker characteristics... " >&6; }
- 
-@@ -10243,7 +10072,7 @@ need_version=unknown
- 
- case $host_os in
- aix3*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   library_names_spec='${libname}${release}${shared_ext}$versuffix $libname.a'
-   shlibpath_var=LIBPATH
- 
-@@ -10252,7 +10081,7 @@ aix3*)
-   ;;
- 
- aix[4-9]*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   hardcode_into_libs=yes
-@@ -10317,7 +10146,7 @@ beos*)
-   ;;
- 
- bsdi[45]*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-   soname_spec='${libname}${release}${shared_ext}$major'
-@@ -10456,7 +10285,7 @@ darwin* | rhapsody*)
-   ;;
- 
- dgux*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname$shared_ext'
-@@ -10464,6 +10293,10 @@ dgux*)
-   shlibpath_var=LD_LIBRARY_PATH
-   ;;
- 
-+freebsd1*)
-+  dynamic_linker=no
-+  ;;
-+
- freebsd* | dragonfly*)
-   # DragonFly does not have aout.  When/if they implement a new
-   # versioning mechanism, adjust this.
-@@ -10471,7 +10304,7 @@ freebsd* | dragonfly*)
-     objformat=`/usr/bin/objformat`
-   else
-     case $host_os in
--    freebsd[23].*) objformat=aout ;;
-+    freebsd[123]*) objformat=aout ;;
-     *) objformat=elf ;;
-     esac
-   fi
-@@ -10489,7 +10322,7 @@ freebsd* | dragonfly*)
-   esac
-   shlibpath_var=LD_LIBRARY_PATH
-   case $host_os in
--  freebsd2.*)
-+  freebsd2*)
-     shlibpath_overrides_runpath=yes
-     ;;
-   freebsd3.[01]* | freebsdelf3.[01]*)
-@@ -10509,18 +10342,17 @@ freebsd* | dragonfly*)
-   ;;
- 
- gnu*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}${major} ${libname}${shared_ext}'
-   soname_spec='${libname}${release}${shared_ext}$major'
-   shlibpath_var=LD_LIBRARY_PATH
--  shlibpath_overrides_runpath=no
-   hardcode_into_libs=yes
-   ;;
- 
- haiku*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   dynamic_linker="$host_os runtime_loader"
-@@ -10581,7 +10413,7 @@ hpux9* | hpux10* | hpux11*)
-   ;;
- 
- interix[3-9]*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major ${libname}${shared_ext}'
-@@ -10597,7 +10429,7 @@ irix5* | irix6* | nonstopux*)
-     nonstopux*) version_type=nonstopux ;;
-     *)
- 	if test "$lt_cv_prog_gnu_ld" = yes; then
--		version_type=linux # correct to gnu/linux during the next big refactor
-+		version_type=linux
- 	else
- 		version_type=irix
- 	fi ;;
-@@ -10634,9 +10466,9 @@ linux*oldld* | linux*aout* | linux*coff*
-   dynamic_linker=no
-   ;;
- 
--# This must be glibc/ELF.
-+# This must be Linux ELF.
- linux* | k*bsd*-gnu | kopensolaris*-gnu)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-@@ -10718,7 +10550,7 @@ netbsd*)
-   ;;
- 
- newsos6)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-   shlibpath_var=LD_LIBRARY_PATH
-   shlibpath_overrides_runpath=yes
-@@ -10787,7 +10619,7 @@ rdos*)
-   ;;
- 
- solaris*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-@@ -10812,7 +10644,7 @@ sunos4*)
-   ;;
- 
- sysv4 | sysv4.3*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-   soname_spec='${libname}${release}${shared_ext}$major'
-   shlibpath_var=LD_LIBRARY_PATH
-@@ -10836,7 +10668,7 @@ sysv4 | sysv4.3*)
- 
- sysv4*MP*)
-   if test -d /usr/nec ;then
--    version_type=linux # correct to gnu/linux during the next big refactor
-+    version_type=linux
-     library_names_spec='$libname${shared_ext}.$versuffix $libname${shared_ext}.$major $libname${shared_ext}'
-     soname_spec='$libname${shared_ext}.$major'
-     shlibpath_var=LD_LIBRARY_PATH
-@@ -10867,7 +10699,7 @@ sysv5* | sco3.2v5* | sco5v6* | unixware*
- 
- tpf*)
-   # TPF is a cross-target only.  Preferred cross-host = GNU/Linux.
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   need_lib_prefix=no
-   need_version=no
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-@@ -10877,7 +10709,7 @@ tpf*)
-   ;;
- 
- uts4*)
--  version_type=linux # correct to gnu/linux during the next big refactor
-+  version_type=linux
-   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
-   soname_spec='${libname}${release}${shared_ext}$major'
-   shlibpath_var=LD_LIBRARY_PATH
-@@ -11659,8 +11491,6 @@ CC="$lt_save_CC"
- 
- 
- 
--
--
-         ac_config_commands="$ac_config_commands libtool"
- 
- 
-@@ -11726,7 +11556,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_path_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -11769,7 +11599,7 @@ do
-   IFS=$as_save_IFS
-   test -z "$as_dir" && as_dir=.
-     for ac_exec_ext in '' $ac_executable_extensions; do
--  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-+  if { test -f "$as_dir/$ac_word$ac_exec_ext" && $as_test_x "$as_dir/$ac_word$ac_exec_ext"; }; then
-     ac_cv_path_ac_pt_PKG_CONFIG="$as_dir/$ac_word$ac_exec_ext"
-     $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
-     break 2
-@@ -11932,7 +11762,7 @@ regular_CFLAGS="-Wall -Waggregate-return
- if test -n "$kbuilddir"; then
- 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking kernel version that we will build against" >&5
- $as_echo_n "checking kernel version that we will build against... " >&6; }
--	krel="$(make -sC "$kbuilddir" M=$PWD kernelrelease)";
-+	krel="$(make -sC "$kbuilddir" M=$PWD kernelversion)";
- 	kmajor="${krel%%[^0-9]*}";
- 	kmajor="$(($kmajor+0))";
- 	krel="${krel:${#kmajor}}";
-@@ -12076,14 +11906,6 @@ LIBOBJS=$ac_libobjs
- LTLIBOBJS=$ac_ltlibobjs
- 
- 
--{ $as_echo "$as_me:${as_lineno-$LINENO}: checking that generated files are newer than configure" >&5
--$as_echo_n "checking that generated files are newer than configure... " >&6; }
--   if test -n "$am_sleep_pid"; then
--     # Hide warnings about reused PIDs.
--     wait $am_sleep_pid 2>/dev/null
--   fi
--   { $as_echo "$as_me:${as_lineno-$LINENO}: result: done" >&5
--$as_echo "done" >&6; }
-  if test -n "$EXEEXT"; then
-   am__EXEEXT_TRUE=
-   am__EXEEXT_FALSE='#'
-@@ -12398,16 +12220,16 @@ if (echo >conf$$.file) 2>/dev/null; then
-     # ... but there are two gotchas:
-     # 1) On MSYS, both `ln -s file dir' and `ln file dir' fail.
-     # 2) DJGPP < 2.04 has no symlinks; `ln -s' creates a wrapper executable.
--    # In both cases, we have to default to `cp -pR'.
-+    # In both cases, we have to default to `cp -p'.
-     ln -s conf$$.file conf$$.dir 2>/dev/null && test ! -f conf$$.exe ||
--      as_ln_s='cp -pR'
-+      as_ln_s='cp -p'
-   elif ln conf$$.file conf$$ 2>/dev/null; then
-     as_ln_s=ln
-   else
--    as_ln_s='cp -pR'
-+    as_ln_s='cp -p'
-   fi
- else
--  as_ln_s='cp -pR'
-+  as_ln_s='cp -p'
- fi
- rm -f conf$$ conf$$.exe conf$$.dir/conf$$.file conf$$.file
- rmdir conf$$.dir 2>/dev/null
-@@ -12467,16 +12289,28 @@ else
-   as_mkdir_p=false
- fi
- 
--
--# as_fn_executable_p FILE
--# -----------------------
--# Test if FILE is an executable regular file.
--as_fn_executable_p ()
--{
--  test -f "$1" && test -x "$1"
--} # as_fn_executable_p
--as_test_x='test -x'
--as_executable_p=as_fn_executable_p
-+if test -x / >/dev/null 2>&1; then
-+  as_test_x='test -x'
-+else
-+  if ls -dL / >/dev/null 2>&1; then
-+    as_ls_L_option=L
-+  else
-+    as_ls_L_option=
-+  fi
-+  as_test_x='
-+    eval sh -c '\''
-+      if test -d "$1"; then
-+	test -d "$1/.";
-+      else
-+	case $1 in #(
-+	-*)set "./$1";;
-+	esac;
-+	case `ls -ld'$as_ls_L_option' "$1" 2>/dev/null` in #((
-+	???[sx]*):;;*)false;;esac;fi
-+    '\'' sh
-+  '
-+fi
-+as_executable_p=$as_test_x
- 
- # Sed expression to map a string onto a valid CPP name.
- as_tr_cpp="eval sed 'y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g'"
-@@ -12498,7 +12332,7 @@ cat >>$CONFIG_STATUS <<\_ACEOF || ac_wri
- # values after options handling.
- ac_log="
- This file was extended by xtables-addons $as_me 2.5, which was
--generated by GNU Autoconf 2.69.  Invocation command line was
-+generated by GNU Autoconf 2.68.  Invocation command line was
- 
-   CONFIG_FILES    = $CONFIG_FILES
-   CONFIG_HEADERS  = $CONFIG_HEADERS
-@@ -12564,10 +12398,10 @@ cat >>$CONFIG_STATUS <<_ACEOF || ac_writ
- ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
- ac_cs_version="\\
- xtables-addons config.status 2.5
--configured by $0, generated by GNU Autoconf 2.69,
-+configured by $0, generated by GNU Autoconf 2.68,
-   with options \\"\$ac_cs_config\\"
- 
--Copyright (C) 2012 Free Software Foundation, Inc.
-+Copyright (C) 2010 Free Software Foundation, Inc.
- This config.status script is free software; the Free Software Foundation
- gives unlimited permission to copy, distribute and modify it."
- 
-@@ -12658,7 +12492,7 @@ fi
- _ACEOF
- cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
- if \$ac_cs_recheck; then
--  set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
-+  set X '$SHELL' '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
-   shift
-   \$as_echo "running CONFIG_SHELL=$SHELL \$*" >&6
-   CONFIG_SHELL='$SHELL'
-@@ -12700,7 +12534,6 @@ pic_mode='`$ECHO "$pic_mode" | $SED "$de
- enable_fast_install='`$ECHO "$enable_fast_install" | $SED "$delay_single_quote_subst"`'
- SHELL='`$ECHO "$SHELL" | $SED "$delay_single_quote_subst"`'
- ECHO='`$ECHO "$ECHO" | $SED "$delay_single_quote_subst"`'
--PATH_SEPARATOR='`$ECHO "$PATH_SEPARATOR" | $SED "$delay_single_quote_subst"`'
- host_alias='`$ECHO "$host_alias" | $SED "$delay_single_quote_subst"`'
- host='`$ECHO "$host" | $SED "$delay_single_quote_subst"`'
- host_os='`$ECHO "$host_os" | $SED "$delay_single_quote_subst"`'
-@@ -12783,6 +12616,7 @@ with_gnu_ld='`$ECHO "$with_gnu_ld" | $SE
- allow_undefined_flag='`$ECHO "$allow_undefined_flag" | $SED "$delay_single_quote_subst"`'
- no_undefined_flag='`$ECHO "$no_undefined_flag" | $SED "$delay_single_quote_subst"`'
- hardcode_libdir_flag_spec='`$ECHO "$hardcode_libdir_flag_spec" | $SED "$delay_single_quote_subst"`'
-+hardcode_libdir_flag_spec_ld='`$ECHO "$hardcode_libdir_flag_spec_ld" | $SED "$delay_single_quote_subst"`'
- hardcode_libdir_separator='`$ECHO "$hardcode_libdir_separator" | $SED "$delay_single_quote_subst"`'
- hardcode_direct='`$ECHO "$hardcode_direct" | $SED "$delay_single_quote_subst"`'
- hardcode_direct_absolute='`$ECHO "$hardcode_direct_absolute" | $SED "$delay_single_quote_subst"`'
-@@ -12838,7 +12672,6 @@ _LTECHO_EOF'
- # Quote evaled strings.
- for var in SHELL \
- ECHO \
--PATH_SEPARATOR \
- SED \
- GREP \
- EGREP \
-@@ -12889,6 +12722,7 @@ with_gnu_ld \
- allow_undefined_flag \
- no_undefined_flag \
- hardcode_libdir_flag_spec \
-+hardcode_libdir_flag_spec_ld \
- hardcode_libdir_separator \
- exclude_expsyms \
- include_expsyms \
-@@ -13575,7 +13409,7 @@ $as_echo "$as_me: executing $ac_file com
- 
-   case $ac_file$ac_mode in
-     "depfiles":C) test x"$AMDEP_TRUE" != x"" || {
--  # Older Autoconf quotes --file arguments for eval, but not when files
-+  # Autoconf 2.62 quotes --file arguments for eval, but not when files
-   # are listed without --file.  Let's play safe and only enable the eval
-   # if we detect the quoting.
-   case $CONFIG_FILES in
-@@ -13588,7 +13422,7 @@ $as_echo "$as_me: executing $ac_file com
-     # Strip MF so we end up with the name of the file.
-     mf=`echo "$mf" | sed -e 's/:.*$//'`
-     # Check whether this is an Automake generated Makefile or not.
--    # We used to match only the files named 'Makefile.in', but
-+    # We used to match only the files named `Makefile.in', but
-     # some people rename them; so instead we look at the file content.
-     # Grep'ing the first line is not enough: some people post-process
-     # each Makefile.in and add a new line on top of each file to say so.
-@@ -13622,19 +13456,21 @@ $as_echo X"$mf" |
-       continue
-     fi
-     # Extract the definition of DEPDIR, am__include, and am__quote
--    # from the Makefile without running 'make'.
-+    # from the Makefile without running `make'.
-     DEPDIR=`sed -n 's/^DEPDIR = //p' < "$mf"`
-     test -z "$DEPDIR" && continue
-     am__include=`sed -n 's/^am__include = //p' < "$mf"`
--    test -z "$am__include" && continue
-+    test -z "am__include" && continue
-     am__quote=`sed -n 's/^am__quote = //p' < "$mf"`
-+    # When using ansi2knr, U may be empty or an underscore; expand it
-+    U=`sed -n 's/^U = //p' < "$mf"`
-     # Find all dependency output files, they are included files with
-     # $(DEPDIR) in their names.  We invoke sed twice because it is the
-     # simplest approach to changing $(DEPDIR) to its actual value in the
-     # expansion.
-     for file in `sed -n "
-       s/^$am__include $am__quote\(.*(DEPDIR).*\)$am__quote"'$/\1/p' <"$mf" | \
--	 sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g'`; do
-+	 sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g' -e 's/\$U/'"$U"'/g'`; do
-       # Make sure the directory exists.
-       test -f "$dirpart/$file" && continue
-       fdir=`$as_dirname -- "$file" ||
-@@ -13688,8 +13524,8 @@ $as_echo X"$file" |
- # NOTE: Changes made to this file will be lost: look at ltmain.sh.
- #
- #   Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005,
--#                 2006, 2007, 2008, 2009, 2010, 2011 Free Software
--#                 Foundation, Inc.
-+#                 2006, 2007, 2008, 2009, 2010 Free Software Foundation,
-+#                 Inc.
- #   Written by Gordon Matzigkeit, 1996
- #
- #   This file is part of GNU Libtool.
-@@ -13743,9 +13579,6 @@ SHELL=$lt_SHELL
- # An echo program that protects backslashes.
- ECHO=$lt_ECHO
- 
--# The PATH separator for the build system.
--PATH_SEPARATOR=$lt_PATH_SEPARATOR
--
- # The host system.
- host_alias=$host_alias
- host=$host
-@@ -14047,6 +13880,10 @@ no_undefined_flag=$lt_no_undefined_flag
- # This must work even if \$libdir does not exist
- hardcode_libdir_flag_spec=$lt_hardcode_libdir_flag_spec
- 
-+# If ld is used when linking, flag to hardcode \$libdir into a binary
-+# during linking.  This must work even if \$libdir does not exist.
-+hardcode_libdir_flag_spec_ld=$lt_hardcode_libdir_flag_spec_ld
-+
- # Whether we need a single "-rpath" flag with a separated argument.
- hardcode_libdir_separator=$lt_hardcode_libdir_separator
- 
 --- a/configure.ac
 +++ b/configure.ac
-@@ -44,7 +44,7 @@ regular_CFLAGS="-Wall -Waggregate-return
+@@ -44,7 +44,7 @@ regular_CFLAGS="-Wall -Waggregate-return -Wmissing-declarations \
  
  if test -n "$kbuilddir"; then
  	AC_MSG_CHECKING([kernel version that we will build against])
--	krel="$(make -sC "$kbuilddir" M=$PWD kernelrelease)";
-+	krel="$(make -sC "$kbuilddir" M=$PWD kernelversion)";
- 	kmajor="${krel%%[[^0-9]]*}";
- 	kmajor="$(($kmajor+0))";
- 	krel="${krel:${#kmajor}}";
+-	krel="$(make -sC "$kbuilddir" M=$PWD kernelrelease | $AWK -v 'FS=[[^0-9.]]' '{print $1; exit}')";
++	krel="$(make -sC "$kbuilddir" M=$PWD kernelversion | $AWK -v 'FS=[[^0-9.]]' '{print $1; exit}')";
+ 	save_IFS=$IFS;
+ 	IFS='.';
+ 	set x $krel;
