#!/usr/bin/lua

local uci = require('luci.model.uci').cursor()
local site = require 'gluon.site_config'
--local gmesh = require 'gluon.mesh'

-- TODO: do we need settings for more interfaces in the firewall?
if site.mesh_on_wan then
  uci:add_to_set('firewall', 'mesh_babel', 'network', 'wan')
end
uci:add_to_set('firewall', 'mesh_babel', 'network', 'client')
uci:add_to_set('firewall', 'mesh_babel', 'network', 'local_node4')
uci:add_to_set('firewall', 'mesh_babel', 'network', 'local_node6')

uci:save('firewall')
uci:commit('firewall')
